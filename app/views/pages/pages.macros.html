{% import 'nightshade-core/src/reviews/reviews.macros.html' as review %}
{% from 'nightshade-core/src/buttons/buttons.macros.html' import button %}
{% from 'nightshade-core/src/popovers/popovers.macros.html' import popover %}


{% macro reviews_filters() %}
<nav class="reviews-filters js-reviews-filters clearfix">
<div class="reviews-wrapper ab-test--shown" id="ab-test-cta-reviews-filters">

<div class="reviews-add-review reviews-add-tab">
  {{ button('WRITE A REVIEW', style='ghost', href='/mattresses/reviews/new') }}
</div>

<div class="reviews-filter-tab js-reviews-filter-tab">
<div class="reviews-filter-title reviews-filter">
Filter
</div>
<form class="reviews-filter-form js-review-filter" action="/mattresses/reviews" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="✓"><div class="reviews-filter-choice reviews-filter body--sans" name="filter" value="rating">
<span class="reviews-filter-ratings-label">
All
</span>
<span data-icon="arrow" data-size="tiny"><svg class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#arrow"></use></svg></span>
<ul class="reviews-filter-list js-review-filter-list is-invisible">
<li class="reviews-filter-rating js-reviews-filter-rating" data-rating="">
All
</li>
<li class="reviews-filter-rating js-reviews-filter-rating" data-rating="5">
5 Stars
</li>
<li class="reviews-filter-rating js-reviews-filter-rating" data-rating="4">
4 Stars
</li>
<li class="reviews-filter-rating js-reviews-filter-rating" data-rating="3">
3 Stars
</li>
<li class="reviews-filter-rating js-reviews-filter-rating" data-rating="2">
2 Stars
</li>
<li class="reviews-filter-rating js-reviews-filter-rating" data-rating="1">
1 Stars
</li>
</ul>
</div>
<input type="hidden" name="rating" id="rating" value="" class="js-ratings-input">
<input type="hidden" name="order" id="order" value="desc">
</form>
</div>
</div>
</nav>
{% endmacro %}

{% macro reviews_header() %}
<header class="reviews-header -backdrop clearfix ab-test--shown" id="ab-test-cta-reviews-header">
  <div class="reviews-wrapper reviews-wrapper--header">
    <div class="reviews-header-lead">

      <div class="reviews-header-lead-image">
        <img alt="Casper Mattress" src="https://casper.imgix.net/product/casper-mattress.png?auto=format">
      </div>

      <div class="reviews-rating-wrapper">
        <h1 class="h2 reviews-title -no-trailer">
          <span itemprop="name">
          Casper Mattress
          </span>
          Reviews
        </h1>

      <div class="reviews-rating" itemtype="http://schema.org/AggregateRating" itemprop="aggregateRating" itemscope="">
        <meta content="4.5" itemprop="ratingValue">
        <meta content="5" itemprop="bestRating">

        {{ review.star_rating('blue') }}
        {{ review.stat_rating() }}

        <span class="popover-container js-popover-container">
          <span class="popover-toggle js-popover-toggle">Learn More &gt;</span>
          {{ popover('left', 'These reviews are submitted by real Casper users. We believe that helpful information — good or bad — should be available to everyone, so we never change reviews. If you see a checkmark next to a reviewer’s name, that means we’ve confirmed that they are verified Casper purchasers..', 'js-popover') }}
        </span>
      </div>
    </div>
  </div>

    <div class="reviews-stats">
      <div class="reviews-stats-table-section">
        {{ progress_bar_table() }}
      </div>
    </div>

    <div class="reviews-thumbnail">
      <div class="reviews-image">
        <img alt="Casper Mattress" src="https://casper.imgix.net/product/casper-mattress.png?auto=format">
      </div>

      <div class="reviews-shop">
        {{ button('SHOP THE Mattress', style='ghost') }}
      </div>
    </div>
  </div>
</header>

{% endmacro %}

{% macro progress_bar_table() %}
<table class="reviews-stats-table">
  <tbody>
    <tr class="reviews-stats-table-row">
      <td class="reviews-stats-table-rating">
        <a class="reviews-stats-table-link js-reviews-stats-table-link" data-rating="5" href="#">5 Star
        </a></td>
        <td class="reviews-stats-table-rating-visual">
          <a class="reviews-stats-table-link js-reviews-stats-table-link" data-rating="5" href="#"><div class="reviews-stats-table-rating-bar-background" data-rating="5">
            <div class="reviews-stats-table-rating-bar" data-rating="5" style="width: 76.31062517521727%;"></div>
          </div>
        </a></td>
        <td class="reviews-stats-table-rating-percent">
          <a class="reviews-stats-table-link js-reviews-stats-table-link" data-rating="5" href="#">76%
          </a></td>
    </tr>
    <tr class="reviews-stats-table-row">
      <td class="reviews-stats-table-rating">
        <a class="reviews-stats-table-link js-reviews-stats-table-link" data-rating="4" href="#">4 Star
        </a></td>
        <td class="reviews-stats-table-rating-visual">
          <a class="reviews-stats-table-link js-reviews-stats-table-link" data-rating="4" href="#"><div class="reviews-stats-table-rating-bar-background" data-rating="4">
            <div class="reviews-stats-table-rating-bar" data-rating="4" style="width: 11.073731426969442%;"></div>
          </div>
        </a></td>
        <td class="reviews-stats-table-rating-percent">
          <a class="reviews-stats-table-link js-reviews-stats-table-link" data-rating="4" href="#">11%
          </a></td>
        </tr>
    <tr class="reviews-stats-table-row">
      <td class="reviews-stats-table-rating">
        <a class="reviews-stats-table-link js-reviews-stats-table-link" data-rating="3" href="#">3 Star
        </a></td>
        <td class="reviews-stats-table-rating-visual">
          <a class="reviews-stats-table-link js-reviews-stats-table-link" data-rating="3" href="#"><div class="reviews-stats-table-rating-bar-background" data-rating="3">
            <div class="reviews-stats-table-rating-bar" data-rating="3" style="width: 6.167647883375386%;"></div>
          </div>
        </a></td>
        <td class="reviews-stats-table-rating-percent">
          <a class="reviews-stats-table-link js-reviews-stats-table-link" data-rating="3" href="#">6%
          </a></td>
        </tr>
  <tr class="reviews-stats-table-row">
    <td class="reviews-stats-table-rating">
      <a class="reviews-stats-table-link js-reviews-stats-table-link" data-rating="2" href="#">2 Star
      </a></td>
      <td class="reviews-stats-table-rating-visual">
        <a class="reviews-stats-table-link js-reviews-stats-table-link" data-rating="2" href="#"><div class="reviews-stats-table-rating-bar-background" data-rating="2">
          <div class="reviews-stats-table-rating-bar" data-rating="2" style="width: 3.84076254555649%;"></div>
        </div>
      </a></td>
      <td class="reviews-stats-table-rating-percent">
        <a class="reviews-stats-table-link js-reviews-stats-table-link" data-rating="2" href="#">4%
        </a></td>
    </tr>
    <tr class="reviews-stats-table-row">
      <td class="reviews-stats-table-rating">
        <a class="reviews-stats-table-link js-reviews-stats-table-link" data-rating="1" href="#">1 Star
        </a></td>
        <td class="reviews-stats-table-rating-visual">
          <a class="reviews-stats-table-link js-reviews-stats-table-link" data-rating="1" href="#"><div class="reviews-stats-table-rating-bar-background" data-rating="1">
            <div class="reviews-stats-table-rating-bar" data-rating="1" style="width: 2.607232968881413%;"></div>
          </div>
        </a></td>
        <td class="reviews-stats-table-rating-percent">
          <a class="reviews-stats-table-link js-reviews-stats-table-link" data-rating="1" href="#">3%
          </a></td>
    </tr>
  </tbody>
</table>
{% endmacro %}
>>>>>>> Stashed changes

{% macro sheets_header() %}
<header class="-hoisted header--hoisted product-diagram-header r-centered r-inner">
  <h1 class="-dark header-title">SOFT, STRONG &amp; BREATHABLE</h1>
  <div class="header-copy body--serif">We spent months researching and designing a perfectly balanced fabric that will stay soft and comfortable wash after wash.</div>

  {{ button('SEE THE DESIGN STORY', 'play', href="/sheets/design") }}
</header>
{% endmacro %}

{% set sheetsDiagramContent = [
  {
    id: "sheets-weave",
    title: "BREATHABLE WEAVE",
    description: "Our percale weave is more breathable and longer lasting than other popular weaves",
    image: "casper-weave-detail.png"
  },
  {
    id: "sheets-thread-count",
    title: "IDEAL THREAD COUNT",
    description: "We discovered the perfect thread count (threads per square inch) to balance softness, strength, and breathability"
  },
  {
    id: "sheets-cotton",
    title: "EXTRA-LONG STAPLE SUPIMA® COTTON",
    description: "Grown in Central Valley California, our cotton is four times stronger than the industry average, so the threads don’t pill or pull",
    image: "casper-sheets-detail.png"
  }
  ]
%}

{% macro diagram() %}
<div aria-label="Casper Sheets (Diagram)" class="product-diagram-widget product-diagram-widget--sheets r-section-wrapper" role="img">

  <div class="product-diagram-items product-diagram-items--sheets">
    {% for diagram_content in sheetsDiagramContent %}
      {{ diagram_item(diagram_content) }}
    {% endfor %}
  </div>
</div>
{% endmacro %}

{% macro diagram_item(data) %}
<article class="product-diagram-item product-diagram-item--{{ data.id }}">
  <div class="product-diagram-item-wrapper">

    {% if data.image %}
      <div aria-label="Casper Sheets (Weave Detail)" class="product-diagram-item-image-bubble product-diagram-item-image-marker product-diagram-item-image-marker--{{ id }}" role="img" style="background-image: url(https://casper.imgix.net/product-diagrams/{{ data.image }}?format=auto )"></div>
    {% else %}
      <div class="product-diagram-item-image-dot product-diagram-item-image-marker product-diagram-item-image-marker--{{ data.id }}"></div>
    {% endif %}

    <h3 class="product-diagram-item-header h4 mx-auto -dark">{{ data.title }}</h3>
    <p class="body--sans-small product-diagram-item-copy mx-auto">
      {{ data.description }}
    </p>
  </div>
</article>
{% endmacro %}

{% macro specs() %}
<div aria-expanded="true" class="product-specs-info-container js-tech-specs-info-container is-expanded">
  <div class="tech-specs-info-section">
    <h4 class="product-specs-section-header">
    COUNTRY OF ORIGIN
    </h4>
    <div class="tech-specs-section-copy">
      Designed in the USA. Spun, woven, and sewn in India. Made with Supima® cotton from California and components from China and India.
    </div>
  </div>
  <div class="tech-specs-info-section">
    <h4 class="product-specs-section-header">
    CONSTRUCTION &amp; MATERIALS
    </h4>
    <div class="tech-specs-section-copy">
      <ul class="tech-specs-materials">
        <li>
          100% extra-long staple Supima® cotton
        </li>
      </ul>
    </div>
  </div>
  <div class="tech-specs-info-section">
    <h4 class="product-specs-section-header--dimensions product-specs-section-header">
    Measurements &amp; Dimensions
    </h4>
    <div class="tech-specs-section-copy tech-specs-dimensions-table-section">
      <table class="tech-specs-table">
        <tbody><tr class="tech-specs-table-row">
          <th class="tech-specs-table-corner"></th>
          <th class="tech-specs-table-header">
            Flat Sheet <br>(W x L)
          </th>
          <th class="tech-specs-table-header">
            Fitted Sheet <br>(W x L x D)
          </th>
          <th class="tech-specs-table-header">
            Duvet Cover <br>(W x L)
          </th>
        </tr>
        <tr class="tech-specs-table-row">
          <td class="tech-specs-table-cell-size tech-specs-dimensions-title">
            Twin
          </td>
          <td class="tech-specs-dimensions-size tech-specs-table-cell">
            66” X 96”
          </td>
          <td class="tech-specs-dimensions-size tech-specs-table-cell">
            39” X 75” X 14”
          </td>
          <td class="tech-specs-dimensions-size tech-specs-table-cell">
            68” X 86”
          </td>
        </tr>
        <tr class="tech-specs-table-row">
          <td class="tech-specs-table-cell-size tech-specs-dimensions-title">
            Twin XL
          </td>
          <td class="tech-specs-dimensions-size tech-specs-table-cell">
            66” X 96”
          </td>
          <td class="tech-specs-dimensions-size tech-specs-table-cell">
            39” X 80” X 14”
          </td>
          <td class="tech-specs-dimensions-size tech-specs-table-cell">
            68” X 86”
          </td>
        </tr>
        <tr class="tech-specs-table-row">
          <td class="tech-specs-table-cell-size tech-specs-dimensions-title">
            Full
          </td>
          <td class="tech-specs-dimensions-size tech-specs-table-cell">
            81” X 96”
          </td>
          <td class="tech-specs-dimensions-size tech-specs-table-cell">
            54” X 75” X 14”
          </td>
          <td class="tech-specs-dimensions-size tech-specs-table-cell">
            88” X 92”
          </td>
        </tr>
        <tr class="tech-specs-table-row">
          <td class="tech-specs-table-cell-size tech-specs-dimensions-title">
            Queen
          </td>
          <td class="tech-specs-dimensions-size tech-specs-table-cell">
            94” X 108”
          </td>
          <td class="tech-specs-dimensions-size tech-specs-table-cell">
            60” X 80” X 14”
          </td>
          <td class="tech-specs-dimensions-size tech-specs-table-cell">
            88” X 92”
          </td>
        </tr>
        <tr class="tech-specs-table-row">
          <td class="tech-specs-table-cell-size tech-specs-dimensions-title">
            King
          </td>
          <td class="tech-specs-dimensions-size tech-specs-table-cell">
            112” X 108”
          </td>
          <td class="tech-specs-dimensions-size tech-specs-table-cell">
            76” X 80” X 14”
          </td>
          <td class="tech-specs-dimensions-size tech-specs-table-cell">
            106” X 92”
          </td>
        </tr>
        <tr class="tech-specs-table-row">
          <td class="tech-specs-table-cell-size tech-specs-dimensions-title">
            Cal King
          </td>
          <td class="tech-specs-dimensions-size tech-specs-table-cell">
            112” X 108”
          </td>
          <td class="tech-specs-dimensions-size tech-specs-table-cell">
            72” X 84” X 14”
          </td>
          <td class="tech-specs-dimensions-size tech-specs-table-cell">
            106” X 92”
          </td>
        </tr>
      </tbody></table>
      <table class="tech-specs-table">
        <tbody><tr class="tech-specs-table-row">
          <th class="tech-specs-table-corner"></th>
          <th class="tech-specs-table-header">
            Pillowcase <br>(W x L)
          </th>
        </tr>
        <tr class="tech-specs-table-row">
          <td class="tech-specs-table-cell-size tech-specs-dimensions-title">
            Standard
          </td>
          <td class="tech-specs-dimensions-size tech-specs-table-cell">
            21” X 30”
          </td>
        </tr>
        <tr class="tech-specs-table-row">
          <td class="tech-specs-table-cell-size tech-specs-dimensions-title">
            King
          </td>
          <td class="tech-specs-dimensions-size tech-specs-table-cell">
            21” X 40”
          </td>
        </tr>
      </tbody></table>
    </div>
    <div aria-hidden="true" class="tech-specs-dimensions-list-section" role="presentation">
      <h3 class="tech-specs-product-header">
      Flat Sheet <br>(W x L)
      </h3>
      <div class="tech-specs-section-copy tech-specs-columns">
        <ul class="tech-specs-list-item tech-specs-measurements">
          <li>
            <span class="tech-specs-dimensions-title">
              Twin
            </span>
          </li>
          <li class="tech-specs-dimensions-size">
            66” X 96”
          </li>
        </ul>
        <ul class="tech-specs-list-item tech-specs-measurements">
          <li>
            <span class="tech-specs-dimensions-title">
              Twin XL
            </span>
          </li>
          <li class="tech-specs-dimensions-size">
            66” X 96”
          </li>
        </ul>
        <ul class="tech-specs-list-item tech-specs-measurements">
          <li>
            <span class="tech-specs-dimensions-title">
              Full
            </span>
          </li>
          <li class="tech-specs-dimensions-size">
            81” X 96”
          </li>
        </ul>
        <ul class="tech-specs-list-item tech-specs-measurements">
          <li>
            <span class="tech-specs-dimensions-title">
              Queen
            </span>
          </li>
          <li class="tech-specs-dimensions-size">
            94” X 108”
          </li>
        </ul>
        <ul class="tech-specs-list-item tech-specs-measurements">
          <li>
            <span class="tech-specs-dimensions-title">
              King
            </span>
          </li>
          <li class="tech-specs-dimensions-size">
            112” X 108”
          </li>
        </ul>
        <ul class="tech-specs-list-item tech-specs-measurements">
          <li>
            <span class="tech-specs-dimensions-title">
              Cal King
            </span>
          </li>
          <li class="tech-specs-dimensions-size">
            112” X 108”
          </li>
        </ul>
      </div>
    </div>
    <div aria-hidden="true" class="tech-specs-dimensions-list-section" role="presentation">
      <h3 class="tech-specs-product-header">
      Fitted Sheet <br>(W x L x D)
      </h3>
      <div class="tech-specs-section-copy tech-specs-columns">
        <ul class="tech-specs-list-item tech-specs-measurements">
          <li>
            <span class="tech-specs-dimensions-title">
              Twin
            </span>
          </li>
          <li class="tech-specs-dimensions-size">
            39” X 75” X 14”
          </li>
        </ul>
        <ul class="tech-specs-list-item tech-specs-measurements">
          <li>
            <span class="tech-specs-dimensions-title">
              Twin XL
            </span>
          </li>
          <li class="tech-specs-dimensions-size">
            39” X 80” X 14”
          </li>
        </ul>
        <ul class="tech-specs-list-item tech-specs-measurements">
          <li>
            <span class="tech-specs-dimensions-title">
              Full
            </span>
          </li>
          <li class="tech-specs-dimensions-size">
            54” X 75” X 14”
          </li>
        </ul>
        <ul class="tech-specs-list-item tech-specs-measurements">
          <li>
            <span class="tech-specs-dimensions-title">
              Queen
            </span>
          </li>
          <li class="tech-specs-dimensions-size">
            60” X 80” X 14”
          </li>
        </ul>
        <ul class="tech-specs-list-item tech-specs-measurements">
          <li>
            <span class="tech-specs-dimensions-title">
              King
            </span>
          </li>
          <li class="tech-specs-dimensions-size">
            76” X 80” X 14”
          </li>
        </ul>
        <ul class="tech-specs-list-item tech-specs-measurements">
          <li>
            <span class="tech-specs-dimensions-title">
              Cal King
            </span>
          </li>
          <li class="tech-specs-dimensions-size">
            72” X 84” X 14”
          </li>
        </ul>
      </div>
    </div>
    <div aria-hidden="true" class="tech-specs-dimensions-list-section" role="presentation">
      <h3 class="tech-specs-product-header">
      Duvet Cover <br>(W x L)
      </h3>
      <div class="tech-specs-section-copy tech-specs-columns">
        <ul class="tech-specs-list-item tech-specs-measurements">
          <li>
            <span class="tech-specs-dimensions-title">
              Twin
            </span>
          </li>
          <li class="tech-specs-dimensions-size">
            68” X 86”
          </li>
        </ul>
        <ul class="tech-specs-list-item tech-specs-measurements">
          <li>
            <span class="tech-specs-dimensions-title">
              Twin XL
            </span>
          </li>
          <li class="tech-specs-dimensions-size">
            68” X 86”
          </li>
        </ul>
        <ul class="tech-specs-list-item tech-specs-measurements">
          <li>
            <span class="tech-specs-dimensions-title">
              Full
            </span>
          </li>
          <li class="tech-specs-dimensions-size">
            88” X 92”
          </li>
        </ul>
        <ul class="tech-specs-list-item tech-specs-measurements">
          <li>
            <span class="tech-specs-dimensions-title">
              Queen
            </span>
          </li>
          <li class="tech-specs-dimensions-size">
            88” X 92”
          </li>
        </ul>
        <ul class="tech-specs-list-item tech-specs-measurements">
          <li>
            <span class="tech-specs-dimensions-title">
              King
            </span>
          </li>
          <li class="tech-specs-dimensions-size">
            106” X 92”
          </li>
        </ul>
        <ul class="tech-specs-list-item tech-specs-measurements">
          <li>
            <span class="tech-specs-dimensions-title">
              Cal King
            </span>
          </li>
          <li class="tech-specs-dimensions-size">
            106” X 92”
          </li>
        </ul>
      </div>
    </div>
    <div aria-hidden="true" class="tech-specs-dimensions-list-section" role="presentation">
      <h3 class="tech-specs-product-header">
      Pillowcase <br>(W x L)
      </h3>
      <div class="tech-specs-section-copy tech-specs-columns">
        <ul class="tech-specs-list-item tech-specs-measurements">
          <li>
            <span class="tech-specs-dimensions-title">
              Standard
            </span>
          </li>
          <li class="tech-specs-dimensions-size">
            21” X 30”
          </li>
        </ul>
        <ul class="tech-specs-list-item tech-specs-measurements">
          <li>
            <span class="tech-specs-dimensions-title">
              King
            </span>
          </li>
          <li class="tech-specs-dimensions-size">
            21” X 40”
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="tech-specs-info-section">
    <h4 class="product-specs-section-header">
    SHIPPING INFO
    </h4>
    <div class="tech-specs-section-copy">
      In the US, we ship via UPS Ground. In Canada, we ship via UPS Air. Please allow one extra day for customs.
    </div>
  </div>
  <div class="tech-specs-info-section">
    <h4 class="product-specs-section-header">
    SHIPPING COSTS
    </h4>
    <div class="tech-specs-section-copy">
      Free shipping and free returns in the US and Canada.
    </div>
  </div>
  <div class="tech-specs-info-section">
    <h4 class="product-specs-section-header">
    CERTIFICATION
    </h4>
    <div class="tech-specs-section-copy">
      <p>
        Certified Supima® Cotton
      </p>
    </div>
  </div>
  <div class="tech-specs-info-section">
    <h4 class="product-specs-section-header">
    WARRANTY
    </h4>
    <div class="tech-specs-section-copy">
      1-year limited warranty.
      <a class="link tech-specs-link" href="/warranty#sheets" target="_blank">Read More</a>
    </div>
  </div>
</div>
{% endmacro%}


{% set sheetsInfographicContent = [
  {
    title: "Flat Sheet",
    description: "A classic cuff runs along both sides of the top edge, so you’ll always know which end is which. It’s also perfect for folding down and tucking in."
  },
  {
    title: "Fitted Sheet",
    description: "With labels indicating the shorter ends, the fitted sheet is both easy to fold and place on the bed. It stays put with grippy elastic."
  },
  {
    title: "Pillowcases",
    description: "The envelope closure keeps your pillow in place and out of sight. The breathable percale weave also keeps you cool through the night.",
    image: "casper-sheets-detail.png"
  },
  {
    title: "Duvet Cover",
    description: "With soft sheeting material on both sides, the duvet cover can be easily flipped. Even smarter, hidden openings offer easy access to the securing snaps in each corner.",
    image: "casper-sheets-detail.png"
  }
  ]
%}

{% macro infographic() %}
<ul class="js-sheets-infographic-gallery product-infographic-options sheets-infographic-options">
  {% for infographic_content in sheetsInfographicContent %}
    {{ infographic_item(infographic_content) }}
  {% endfor %}
</ul>
{% endmacro%}

{% macro infographic_item(data) %}
<li class="product-infographic-option sheets-infographic-option sheets-infographic-option--fitted-sheet">
  <figure class="product-infographic-drawing sheets-infographic-drawing sheets-infographic-drawing--flat-sheet">
    <img alt="Casper Flat Sheet" src="https://casper.imgix.net/sheets-infographic/casper-flat-sheet.png?auto=format">
  </figure>
  <h4 class="product-infographic-option-title sheets-infographic-option-title">{{ data.title }}</h4>
  <p class="body--sans-small product-infographic-option-copy sheets-infographic-option-copy">{{ data.description }}</p>
</li>
{% endmacro%}
